<%- include('partials/header', {
  title: 'API Explorer',
  description: 'Browse available API categories'
}) %>

<!-- TERMINAL -->
<div class="terminal">
  <div class="terminal-header">
    <div class="dot red"></div>
    <div class="dot yellow"></div>
    <div class="dot green"></div>
  </div>
  <div class="term-text">
    nekolabs@api:~$ search endpoints...
  </div>
</div>

<!-- SEARCH -->
<input
  id="searchInput"
  placeholder="Search API..."
  style="
    width:100%;
    padding:14px 16px;
    border-radius:16px;
    background:#0f1418;
    border:1px solid var(--border);
    color:var(--text);
    outline:none;
    margin-bottom:20px;
  "
>

<p id="noResult" style="display:none;color:var(--muted)">
  API belum ada atau belum ditambahkan.
</p>

<!-- CATEGORY LIST -->
<div id="categoryList">
  <% endpoints.forEach(cat => { %>
    <a href="/category/<%= cat.slug %>"
       class="card category-card"
       data-search="<%= cat.name.toLowerCase() %>">

      <div style="font-weight:700">
        <%= cat.name %>
      </div>
      <div style="font-size:13px;color:var(--muted)">
        <%= cat.items.length %> endpoints
      </div>

    </a>
  <% }) %>
</div>

<script>
const input = document.getElementById('searchInput');
const cards = document.querySelectorAll('.category-card');
const noResult = document.getElementById('noResult');

input.addEventListener('input',()=>{
  const q=input.value.toLowerCase().trim();
  let found=false;

  cards.forEach(card=>{
    const match = card.dataset.search.includes(q);
    card.style.display = match ? 'block' : 'none';
    if(match) found=true;
  });

  noResult.style.display = found || !q ? 'none' : 'block';
});
</script>

<%- include('partials/footer',{name}) %>