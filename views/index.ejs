<%- include('partials/header', { title: name, description }) %>

<section class="mb-8">
  <h1 class="text-3xl font-bold mb-2">
    <%= name %>
    <span class="ml-2 text-xs px-2 py-1 rounded bg-slate-200 dark:bg-slate-700">
      v<%= version %>
    </span>
  </h1>

  <p class="text-sm text-slate-600 dark:text-slate-300 max-w-xl">
    <%= description %>
  </p>

  <a href="#categories" class="inline-block mt-4 gbtn text-xs">
    Explore API
  </a>
</section>

<!-- STATS -->
<section class="grid grid-cols-2 gap-3 mb-6">
  <div class="p-4 border rounded-xl text-center">
    <div class="text-xl font-bold">
      <%= endpoints.reduce((t,c)=>t+c.items.length,0) %>
    </div>
    <div class="text-xs text-slate-500">Endpoints</div>
  </div>

  <div class="p-4 border rounded-xl text-center">
    <div class="text-xl font-bold"><%= endpoints.length %></div>
    <div class="text-xs text-slate-500">Categories</div>
  </div>
</section>

<!-- CATEGORIES -->
<section id="categories" class="space-y-2">
  <% endpoints.forEach(category => { 
    const slug = category.name.toLowerCase()
      .replace(/[^a-z0-9\s-]/g,'')
      .replace(/\s+/g,'-');
  %>
    <a href="/category/<%= slug %>"
       class="block p-4 border rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition">
      <div class="flex justify-between items-center">
        <div>
          <h3 class="font-semibold text-sm"><%= category.name %></h3>
          <p class="text-xs text-slate-500">
            <%= category.items.length %> endpoints
          </p>
        </div>
        <span class="material-icons-outlined text-slate-400">chevron_right</span>
      </div>
    </a>
  <% }) %>
</section>

<%- include('partials/footer', { name }) %>