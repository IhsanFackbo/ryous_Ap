<%- include('partials/header', {
  title: categoryName,
  description: categoryDesc
}) %>

<!-- BACK -->
<a href="/api"
   style="
     display:inline-flex;
     align-items:center;
     gap:6px;
     font-size:13px;
     color:var(--muted);
     margin-bottom:18px;
   ">
  <span class="material-icons-outlined" style="font-size:18px">
    arrow_back
  </span>
  Back
</a>

<h2 style="margin:0 0 6px 0">
  <%= categoryName %>
</h2>

<p style="font-size:13px;color:var(--muted);margin-bottom:24px">
  <%= categoryDesc %> â€¢ <%= category.items.length %> endpoints
</p>

<!-- ENDPOINT LIST -->
<% category.items.forEach((endpoint,i)=>{ %>

  <div class="card">

    <!-- HEADER -->
    <button onclick="toggleEndpoint(<%= i %>)"
      style="
        width:100%;
        display:flex;
        justify-content:space-between;
        align-items:flex-start;
        background:none;
        border:none;
        color:inherit;
        cursor:pointer;
        padding:0;
      ">

      <div>
        <div style="font-size:12px;font-weight:700;color:var(--azure)">
          <%= endpoint.method %>
        </div>

        <div style="font-family:'Ubuntu Mono';font-size:14px">
          <%= endpoint.path %>
        </div>

        <% if(endpoint.alias){ %>
          <div style="font-size:12px;color:var(--muted)">
            <%= endpoint.alias %>
          </div>
        <% } %>
      </div>

      <span id="icon-<%= i %>"
        class="material-icons-outlined"
        style="color:var(--muted)">
        expand_more
      </span>

    </button>

    <!-- EXPAND -->
    <div id="ep-<%= i %>" style="display:none;margin-top:16px">

      <a href="/endpoint/<%= endpoint.slug %>" class="btn">
        Execute
      </a>

    </div>

  </div>

<% }) %>

<script>
function toggleEndpoint(i){
  const el = document.getElementById('ep-'+i);
  const ic = document.getElementById('icon-'+i);

  const open = el.style.display === 'block';
  el.style.display = open ? 'none' : 'block';
  ic.textContent = open ? 'expand_more' : 'expand_less';
}
</script>

<%- include('partials/footer',{name}) %>