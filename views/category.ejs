<%- include('partials/header', {
  title: categoryName,
  description: categoryDesc
}) %>

<a href="/api"
  class="inline-flex items-center gap-1 text-sm mb-4">
  <span class="material-icons-outlined text-base">arrow_back</span>
  Back
</a>

<h2 class="text-2xl font-bold mb-1"><%= categoryName %></h2>
<p class="text-xs text-slate-500 mb-5">
  <%= categoryDesc %> â€¢ <%= category.items.length %> endpoints
</p>

<div class="space-y-3">
  <% category.items.forEach((endpoint,i)=>{ %>
    <div class="border rounded-xl p-4">
      <button onclick="toggleEndpoint(<%= i %>)"
        class="w-full flex justify-between text-left">
        <div>
          <div class="text-xs font-bold"><%= endpoint.method %></div>
          <div class="font-mono text-sm"><%= endpoint.path %></div>
          <div class="text-xs text-slate-500"><%= endpoint.alias %></div>
        </div>
        <span id="icon-<%= i %>" class="material-icons-outlined">expand_more</span>
      </button>

      <div id="ep-<%= i %>" class="hidden mt-3">
        <button class="gbtn text-xs">Execute</button>
      </div>
    </div>
  <% }) %>
</div>

<script>
  function toggleEndpoint(i){
    const el = document.getElementById(`ep-${i}`);
    const ic = document.getElementById(`icon-${i}`);
    el.classList.toggle('hidden');
    ic.textContent = el.classList.contains('hidden')
      ? 'expand_more' : 'expand_less';
  }
</script>

<%- include('partials/footer', { name }) %>